File Formats
============

The file formats generated by telemac-parse are described below. For
information about the SELAFIN file format, see the TELEMAC documentation or the
brief descriptions of the [data structures](@ref records) defined in
telemac-loader.h.

@tableofcontents

Coordinates
-----------

X and Y coordinates are stored in flat tab seprated text files with the
following format:

@verbatim
npoin
id0	coordinate0
id1	coordinate1
id2	coordinate2
@endverbatim

`npoin` represents the total number of nodes in the mesh, `id0...idN` are the
node ID numbers and `coordinate0...coordinateN` are the coordinates for each
node in a fixed decimal form.

The files are named `base.x.txt` and `base.y.txt` respectively.

Z coordinates (for 3D simulations) are permitted to vary in time, and are
stored as simulation results. 

Connectivity
------------

The connectivity file specifies the IDs for nodes making up each
element. It also specifies the number of nodes in each element, which
determines the element shape.

File format:
@verbatim
nelem	ndp
eid0	nid00
eid0	nid01
....	.....
eid0	nid0N
....	.....
eidN	nidNN
@endverbatim

`nelem` is the total number of elements and `ndp` specifies the number of
points per element. There are then `nelem*ndp` entries in the file specifying
an element ID and node ID. Each element is finished (all points specified)
before the next is started. `eid0...eidN` represent the element IDs and
`nid00...nidNN` represent the corresponding node IDs. All ID numbers are
specified as integer values.

The file is named `base.conn.txt`.

Variable names
--------------

The variable name file provides the user visible labels associated with each variable number.

File format:
@verbatim
numvars
varid0	varname0
varid1	varname1
......	........
@endverbatim

`numvars` is the total number of variables in the simulation. `varidN` is the
variable number and `varname` is the name of the variable. The variable names
are unquoted - any characters between the tab character and the end of line
will be used, up to a limit of 33 characters.

The file is named `base.vars.txt`

Simulation variables
--------------------

Simulation results or variables are output in either text or binary files, with
one file for each variable for each timestep.

Text files are easier to process with other tools - particularly those written
in other languages - but are typically larger and slower to process. Binary
files tend to be smaller and faster to read, and should be portable to any
machine using IEEE 754 floating point formats.


### Binary format ###

Binary files are named `base.varI.tN.dat`, where `I` is the variable number and
`N` is the timestep.

The file contains `npoin` `double` values, written with no header, padding or delimiters:
~~~{.c}
int fwcount = fwrite(dd, sizeof(double), results.npoin, datafile);
~~~
See the source of telemac-parse.c for further details.

### Text format ###

Text files are named `base.varI.tN.txt`, where `I` is the variable number and
`N` is the timestep.

There is no header for these files - each line consists of a node ID and value
in fixed decimal form, seperated by a tab character.

@verbatim
nid0	value0
nid1	value1
....	......
@endverbatim

Timestamps
----------

Each simulation timestep has an associated timestamp, representing the seconds
elapsed since a given reference point. This reference point is usually (but may
not be) the first timestep.

File format:
@verbatim
nt
ts0	time0
ts1	time1
...	.....
tsN	timeN
@endverbatim

`nt` is the number of timesteps included in the simulation. `ts0...tsN` are the
integer timestep IDs, and correspond to the values used to label variable
files.  `time0...timeN` are the elapsed times, written in fixed decimal form.

The file is named `base.times.txt`
